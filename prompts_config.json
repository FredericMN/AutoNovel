{
  "_version": "1.0",
  "_description": "提示词模块配置文件 - Prompt Module Configuration",
  "_last_modified": "2025-10-01",
  "_note": "enabled=true表示启用，required=true表示必需模块不可禁用，dependencies列出依赖的其他模块",
  "modules": {
    "architecture": {
      "core_seed": {
        "enabled": true,
        "required": true,
        "display_name": "核心种子生成",
        "description": "生成小说的核心主题、类型和冲突",
        "file": "custom_prompts/core_seed_prompt.txt",
        "dependencies": [],
        "variables": [
          "topic",
          "genre",
          "number_of_chapters",
          "word_number",
          "user_guidance"
        ]
      },
      "character_dynamics": {
        "enabled": true,
        "required": false,
        "display_name": "角色动力学",
        "description": "角色设定、性格、关系网络",
        "file": "custom_prompts/character_dynamics_prompt.txt",
        "dependencies": [],
        "variables": [
          "core_seed",
          "user_guidance"
        ]
      },
      "world_building": {
        "enabled": true,
        "required": false,
        "display_name": "世界观构建",
        "description": "世界观、背景设定、规则体系",
        "file": "custom_prompts/world_building_prompt.txt",
        "dependencies": [],
        "variables": [
          "core_seed",
          "user_guidance"
        ]
      },
      "plot_architecture": {
        "enabled": true,
        "required": false,
        "display_name": "三幕式情节",
        "description": "情节架构（起承转合）",
        "file": "custom_prompts/plot_architecture_prompt.txt",
        "dependencies": [
          "character_dynamics",
          "world_building"
        ],
        "variables": [
          "core_seed",
          "character_dynamics",
          "world_building",
          "user_guidance",
          "number_of_chapters",
          "num_volumes"
        ]
      },
      "volume_breakdown": {
        "enabled": true,
        "required": false,
        "display_name": "分卷架构",
        "description": "分卷小说的卷架构规划",
        "file": "custom_prompts/volume_breakdown_prompt.txt",
        "variables": [
          "novel_architecture",
          "num_volumes",
          "num_chapters",
          "volume_format_examples"
        ],
        "dependencies": []
      },
      "user_concept_to_core_seed": {
        "enabled": true,
        "required": false,
        "display_name": "构思提炼核心种子",
        "description": "【构思模式】从用户已有故事构思中提炼核心种子",
        "file": "custom_prompts/user_concept_to_core_seed_prompt.txt",
        "dependencies": [],
        "variables": [
          "user_concept",
          "genre",
          "number_of_chapters",
          "word_number",
          "user_guidance"
        ]
      },
      "concept_character_dynamics": {
        "enabled": true,
        "required": false,
        "display_name": "构思角色动力学",
        "description": "【构思模式】基于用户构思设计角色，优先采用用户已有角色设定",
        "file": "custom_prompts/concept_character_dynamics_prompt.txt",
        "dependencies": [
          "user_concept_to_core_seed"
        ],
        "variables": [
          "user_concept",
          "core_seed",
          "user_guidance"
        ]
      },
      "concept_world_building": {
        "enabled": true,
        "required": false,
        "display_name": "构思世界观构建",
        "description": "【构思模式】基于用户构思构建世界观，优先采用用户已有设定",
        "file": "custom_prompts/concept_world_building_prompt.txt",
        "dependencies": [
          "user_concept_to_core_seed"
        ],
        "variables": [
          "user_concept",
          "core_seed",
          "user_guidance"
        ]
      }
    },
    "blueprint": {
      "chapter_blueprint": {
        "enabled": true,
        "required": true,
        "display_name": "章节蓝图",
        "description": "生成所有章节的标题和大纲",
        "file": "custom_prompts/chapter_blueprint_prompt.txt",
        "variables": [
          "novel_architecture",
          "number_of_chapters",
          "user_guidance"
        ],
        "dependencies": []
      },
      "chunked_blueprint": {
        "enabled": true,
        "required": true,
        "display_name": "分块蓝图生成",
        "description": "分块生成大量章节的蓝图",
        "file": "custom_prompts/chunked_chapter_blueprint_prompt.txt",
        "variables": [
          "novel_architecture",
          "chapter_list",
          "number_of_chapters",
          "n",
          "m",
          "user_guidance"
        ],
        "dependencies": []
      },
      "volume_chapter_blueprint": {
        "enabled": true,
        "required": false,
        "display_name": "分卷章节蓝图",
        "description": "分卷模式下生成每一卷的章节蓝图",
        "file": "custom_prompts/volume_chapter_blueprint_prompt.txt",
        "variables": [
          "novel_architecture",
          "volume_architecture",
          "volume_number",
          "volume_start",
          "volume_end",
          "volume_total_chapters",
          "volume_chapter_count",
          "volume_original_start",
          "previous_volumes_summary",
          "resume_mode_notice",
          "user_guidance"
        ],
        "dependencies": []
      }
    },
    "chapter": {
      "first_chapter": {
        "enabled": true,
        "required": true,
        "display_name": "第一章草稿",
        "description": "生成第一章的草稿内容",
        "file": "custom_prompts/first_chapter_draft_prompt.txt",
        "variables": [
          "volume_display",
          "volume_architecture",
          "unresolved_plot_arcs",
          "novel_number",
          "chapter_title",
          "chapter_role",
          "chapter_purpose",
          "suspense_level",
          "foreshadowing",
          "plot_twist_level",
          "word_number",
          "volume_position",
          "chapter_summary",
          "characters_involved",
          "key_items",
          "scene_location",
          "time_constraint",
          "user_guidance",
          "novel_setting"
        ],
        "dependencies": []
      },
      "next_chapter": {
        "enabled": true,
        "required": true,
        "display_name": "后续章节草稿",
        "description": "生成第二章及以后的草稿内容",
        "file": "custom_prompts/next_chapter_draft_prompt.txt",
        "variables": [
          "global_summary",
          "volume_info",
          "volume_architecture",
          "unresolved_plot_arcs",
          "previous_chapter_excerpt",
          "character_state",
          "short_summary",
          "current_volume_display",
          "novel_number",
          "chapter_title",
          "chapter_role",
          "chapter_purpose",
          "suspense_level",
          "foreshadowing",
          "plot_twist_level",
          "word_number",
          "volume_position",
          "chapter_summary",
          "characters_involved",
          "key_items",
          "scene_location",
          "time_constraint",
          "user_guidance",
          "next_volume_display",
          "next_chapter_number",
          "next_chapter_title",
          "next_chapter_role",
          "next_chapter_purpose",
          "next_chapter_suspense_level",
          "next_chapter_foreshadowing",
          "next_chapter_plot_twist_level",
          "next_chapter_summary",
          "filtered_context"
        ],
        "dependencies": []
      },
      "critique": {
        "enabled": true,
        "required": false,
        "display_name": "批评家审阅【Plan C】",
        "description": "【Plan C - 默认关闭】对初稿进行批评性分析，指出逻辑和文笔问题。⚠️ 启用后每章增加2次API调用，成本较高",
        "file": "custom_prompts/critique_prompt.txt",
        "variables": [
          "novel_number",
          "chapter_title",
          "chapter_text",
          "short_summary",
          "previous_chapter_excerpt"
        ],
        "dependencies": []
      },
      "refine": {
        "enabled": true,
        "required": false,
        "display_name": "作家重写【Plan C】",
        "description": "【Plan C - 默认关闭】根据批评意见重写章节，需与批评家模块同时启用才能生效",
        "file": "custom_prompts/refine_prompt.txt",
        "variables": [
          "critique",
          "draft_text",
          "word_number",
          "short_summary",
          "previous_chapter_excerpt"
        ],
        "dependencies": [
          "critique"
        ]
      },
      "single_chapter_summary": {
        "enabled": true,
        "required": false,
        "display_name": "单章摘要缓存【Plan B】",
        "description": "【Plan B】定稿时生成单章摘要缓存，后续章节优先读取摘要而非全文，节省Token",
        "file": "custom_prompts/single_chapter_summary_prompt.txt",
        "variables": [
          "novel_number",
          "chapter_title",
          "chapter_text"
        ],
        "dependencies": []
      },
      "chapter_summary": {
        "enabled": true,
        "required": false,
        "display_name": "多章合并摘要",
        "description": "生成最近几章的合并摘要（旧版逻辑）",
        "file": "custom_prompts/summarize_recent_chapters_prompt.txt",
        "variables": [
          "combined_text",
          "novel_number",
          "chapter_title",
          "chapter_role",
          "chapter_purpose",
          "suspense_level",
          "foreshadowing",
          "plot_twist_level",
          "chapter_summary",
          "next_chapter_number",
          "next_chapter_title",
          "next_chapter_role",
          "next_chapter_purpose",
          "next_chapter_suspense_level",
          "next_chapter_foreshadowing",
          "next_chapter_plot_twist_level",
          "next_chapter_summary"
        ],
        "dependencies": []
      }
    },
    "finalization": {
      "summary_update": {
        "enabled": true,
        "required": false,
        "display_name": "前文摘要更新",
        "description": "定稿时更新全局摘要",
        "file": "custom_prompts/summary_prompt.txt",
        "variables": [
          "chapter_text",
          "global_summary"
        ],
        "dependencies": []
      },
      "character_state_update": {
        "enabled": true,
        "required": false,
        "display_name": "角色状态更新",
        "description": "定稿时更新角色状态表",
        "file": "custom_prompts/update_character_state_prompt.txt",
        "variables": [
          "chapter_text",
          "old_state"
        ],
        "dependencies": []
      },
      "volume_summary": {
        "enabled": true,
        "required": false,
        "display_name": "卷总结生成",
        "description": "生成每卷的总结",
        "file": "custom_prompts/volume_summary_prompt.txt",
        "variables": [
          "volume_number",
          "volume_start",
          "volume_end"
        ],
        "dependencies": []
      },
      "plot_arcs_update": {
        "enabled": true,
        "required": false,
        "display_name": "剧情要点更新",
        "description": "记录未解决伏笔，按ABC级分类（步骤2.5/3）",
        "file": "custom_prompts/plot_arcs_update_prompt.txt",
        "variables": [
          "chapter_text",
          "old_plot_arcs"
        ],
        "dependencies": []
      },
      "plot_arcs_distill": {
        "enabled": true,
        "required": false,
        "display_name": "伏笔提炼（精简版）",
        "description": "提炼核心伏笔融入摘要：A级5条+B级3条（步骤2.8/3）",
        "file": "custom_prompts/plot_arcs_distill_prompt.txt",
        "variables": [
          "plot_arcs_text"
        ],
        "dependencies": [
          "plot_arcs_update"
        ]
      },
      "plot_arcs_compress": {
        "enabled": true,
        "required": false,
        "display_name": "伏笔二次压缩",
        "description": "当精简版超过200字时触发二次压缩（步骤2.8/3）",
        "file": "custom_prompts/plot_arcs_compress_prompt.txt",
        "variables": [
          "distilled_arcs"
        ],
        "dependencies": [
          "plot_arcs_distill"
        ]
      },
      "plot_arcs_compress_auto": {
        "enabled": true,
        "required": false,
        "display_name": "智能自动压缩",
        "description": "周期性压缩详细版：A级≤30条、B级≤10条、C级≤3条（步骤2.6/3，每10章触发）",
        "file": "custom_prompts/plot_arcs_compress_auto.txt",
        "variables": [
          "classified_plot_arcs",
          "current_chapter",
          "unresolved_count",
          "resolved_count"
        ],
        "dependencies": [
          "plot_arcs_update"
        ]
      }
    },
    "helper": {
      "knowledge_search": {
        "enabled": true,
        "required": false,
        "display_name": "知识库搜索",
        "description": "从知识库中搜索相关内容",
        "file": "custom_prompts/knowledge_search_prompt.txt",
        "variables": [
          "chapter_number",
          "chapter_title",
          "characters_involved",
          "key_items",
          "scene_location",
          "chapter_role",
          "chapter_purpose",
          "foreshadowing",
          "short_summary",
          "user_guidance",
          "time_constraint"
        ],
        "dependencies": []
      },
      "knowledge_filter": {
        "enabled": true,
        "required": false,
        "display_name": "知识库过滤",
        "description": "过滤知识库搜索结果",
        "file": "custom_prompts/knowledge_filter_prompt.txt",
        "variables": [
          "retrieved_texts",
          "chapter_info"
        ],
        "dependencies": []
      },
      "create_character_state": {
        "enabled": true,
        "required": false,
        "display_name": "初始角色状态",
        "description": "创建初始角色状态表",
        "file": "custom_prompts/create_character_state_prompt.txt",
        "variables": [
          "character_dynamics"
        ],
        "dependencies": [
          "character_dynamics"
        ]
      },
      "global_system": {
        "enabled": false,
        "required": false,
        "display_name": "全局System Prompt",
        "description": "全局系统提示词（所有LLM调用都会注入）",
        "file": "custom_prompts/system_prompt.txt",
        "variables": [],
        "dependencies": []
      }
    }
  }
}
